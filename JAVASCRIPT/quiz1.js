document.addEventListener("DOMContentLoaded", () => {
  const quizBox = document.getElementById('quiz-box');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');
  const btnWrap = document.querySelector('.quiz-btns');
  
  let currentQuestion = 0;
  let answers = {};
  let injectedDevQIndex = null;
  let injectedDevType = null;
  
  const quizData_common = [
    // 1. í˜„ì¬ ìƒí™©
    {
      id: "currentStatus",
      q: "í˜„ì¬ ë³¸ì¸ì˜ ê°œë°œ ê´€ë ¨ ìƒí™©ì€ ë¬´ì—‡ì¸ê°€ìš”?",
      a: [
        "í•™ìƒì´ì—ìš”",
        "ê°œë°œ ê´€ë ¨ ì·¨ì—…ì„ ì¤€ë¹„í•˜ê³  ìˆì–´ìš”",
        "ê°œë°œìë¡œ í™œë™ ì¤‘ì´ì—ìš”",
        "ê°œë°œ ê³µë¶€ë¥¼ ì´ì œ ë§‰ ì‹œì‘í–ˆì–´ìš”"
      ]
    },

    // 2. ê²½í—˜ ê¸°ê°„
    {
      id: "experience",
      q: "ê°œë°œ ê³µë¶€ë‚˜ í”„ë¡œì íŠ¸ ê²½í—˜ì€ ì–¼ë§ˆë‚˜ ë˜ì…¨ë‚˜ìš”?",
      a: [
        "3ê°œì›” ë¯¸ë§Œì´ì—ìš”",
        "3ê°œì›” ~ 6ê°œì›” ì •ë„ì˜ˆìš”",
        "6ê°œì›” ~ 1ë…„ ì •ë„ì˜ˆìš”",
        "1ë…„ ~ 3ë…„ ì •ë„ì˜ˆìš”",
        "3ë…„ ì´ìƒ ê²½í—˜ì´ ìˆì–´ìš”"
      ]
    },

    // 3. ì „ê³µ/ë°°ê²½
    {
      id: "background",
      q: "ë³¸ì¸ì˜ ì „ê³µ ë˜ëŠ” ê¸°ìˆ  ë°°ê²½ê³¼ ê°€ì¥ ê°€ê¹Œìš´ ê²ƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
      a: [
        "ì†Œí”„íŠ¸ì›¨ì–´/ì»´í“¨í„°ê³µí•™ ê´€ë ¨ ì „ê³µì´ì—ìš”",
        "ê³µí•™Â·ìˆ˜í•™Â·í†µê³„ ê¸°ë°˜ ì „ê³µì´ì—ìš”",
        "ì¸ë¬¸Â·ì‚¬íšŒÂ·ì˜ˆì²´ëŠ¥ ê³„ì—´ ì „ê³µì´ì—ìš”",
        "ë¹„ì „ê³µì´ì§€ë§Œ IT ê´€ë ¨ ê²½í—˜ì´ ìˆì–´ìš”",
        "ì™„ì „ ë¹„ì „ê³µì´ê³  ì²˜ìŒ ì‹œì‘ ì¤‘ì´ì—ìš”"
      ]
    },

    // 4. ì‚¬ìš© ì–¸ì–´
    {
      id: "knownLangs",
      q: "ì‚¬ìš©í•´ë³¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
      a: [
        "C / C++",
        "Java",
        "Python",
        "JavaScript / TypeScript",
        "Rust",
        "Go",
        "Kotlin / Swift",
        "C#",
        "ê¸°íƒ€",
        "ì•„ì§ ì–¸ì–´ ê²½í—˜ì´ ì—†ì–´ìš”"
      ],
      multiple: true
    },

    // 5. í”„ë¡œì íŠ¸ ê²½í—˜
    {
      id: "projectExp",
      q: "í”„ë¡œì íŠ¸ ê²½í—˜ì€ ì–´ëŠ ì •ë„ ìˆìœ¼ì‹ ê°€ìš”?",
      a: [
        "ì•„ì§ í”„ë¡œì íŠ¸ë¥¼ í•´ë³¸ ì  ì—†ì–´ìš”",
        "ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³¸ ì  ìˆì–´ìš”",
        "íŒ€ í”„ë¡œì íŠ¸ ê²½í—˜ì´ ìˆì–´ìš”",
        "ì‹¤ë¬´ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•´ë³¸ ì  ìˆì–´ìš”"
      ]
    },

    // 6. ì‚¬ìš©í•´ë³¸ ê¸°ìˆ  ìŠ¤íƒ
    {
      id: "frameworkExp",
      q: "ê²½í—˜í•´ë³´ì•˜ê±°ë‚˜ íŠœí† ë¦¬ì–¼ë¡œ ë‹¤ë¤„ë³¸ ê¸°ìˆ  ìŠ¤íƒì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
      a: [
        "HTML/CSS + JavaScriptë¡œ í™”ë©´ì„ ë§Œë“¤ì–´ë´¤ì–´ìš”",
        "React/Vue ë“± í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•´ë´¤ì–´ìš”",
        "Spring / Node.js / Django / FastAPI ë“± ì„œë²„ ê°œë°œ ê²½í—˜ì´ ìˆì–´ìš”",
        "Android / iOS / Flutter / React Native ë“± ëª¨ë°”ì¼ ì•± ê°œë°œ ê²½í—˜ì´ ìˆì–´ìš”",
        "Pandas/NumPy, Scikit-learn, TensorFlow, PyTorch ë“± AI ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ë´¤ì–´ìš”",
        "Unity / Unreal / Godot ë“± ê²Œì„ ì—”ì§„ì„ ì‚¬ìš©í•´ë´¤ì–´ìš”",
        "Arduino / Raspberry Pi ë“± í•˜ë“œì›¨ì–´ ë³´ë“œë¥¼ ë‹¤ë¤„ë´¤ì–´ìš”",
        "ì•„ì§ ê²½í—˜ì´ ì—†ì–´ìš”"
      ],
      multiple: true
    },

    // 7. ê´€ì‹¬ ê°œë°œ ì˜ì—­
    {
      id: "interestDevField",
      q: "í˜„ì¬ ê´€ì‹¬ ìˆëŠ” ê°œë°œ ì˜ì—­ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
      a: [
        "í”„ë¡ íŠ¸ì—”ë“œ (UI/í™”ë©´ êµ¬í˜„)",
        "ë°±ì—”ë“œ (APIÂ·ì„œë²„Â·ë°ì´í„° ì²˜ë¦¬)",
        "AI/ë°ì´í„° ê°œë°œ",
        "ê²Œì„ ê°œë°œ",
        "ë³´ì•ˆ / ë„¤íŠ¸ì›Œí¬ / ì‹œìŠ¤í…œ",
        "ì„ë² ë””ë“œ / IoT",
        "í´ë¼ìš°ë“œ / ì¸í”„ë¼ / ìë™í™”",
        "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
      ],
      multiple: true
    },

    // 8. ë˜ê³  ì‹¶ì€ ê°œë°œì ìœ í˜•
    {
      id: "targetRole",
      q: "ê°€ì¥ ë˜ê³  ì‹¶ì€ ê°œë°œì ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
      a: [
        "ì›¹ ê°œë°œì",
        "ëª¨ë°”ì¼ ì•± ê°œë°œì",
        "ë°ë¸Œì˜µìŠ¤ / í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´",
        "AI ê°œë°œì",
        "ê²Œì„ ê°œë°œì",
        "ë³´ì•ˆ ì „ë¬¸ê°€",
        "ì„ë² ë””ë“œ / IoT ê°œë°œì",
        "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
      ]
    },

    // 9. í”„ë¡œì íŠ¸ ì„±í–¥
    {
      id: "projectPreference",
      q: "ì–´ë–¤ ì„±ê²©ì˜ í”„ë¡œì íŠ¸ê°€ ë” í¥ë¯¸ë¡­ë‚˜ìš”?",
      a: [
        "ì‚¬ìš©ì í™”ë©´(UI/UX)ì„ ë§Œë“œëŠ” í”„ë¡œì íŠ¸",
        "ì„œë¹„ìŠ¤ ë¡œì§Â·APIÂ·DB êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ëŠ” í”„ë¡œì íŠ¸",
        "ë°ì´í„° ë¶„ì„Â·AI ëª¨ë¸ì„ ë‹¤ë£¨ëŠ” í”„ë¡œì íŠ¸",
        "ì•±Â·ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ì‘ë™í•˜ëŠ” í”„ë¡œì íŠ¸",
        "ê²Œì„Â·ê·¸ë˜í”½Â·ì¸í„°ë™ì…˜ ì¤‘ì‹¬ í”„ë¡œì íŠ¸",
        "í•˜ë“œì›¨ì–´Â·ì„¼ì„œì™€ ì—°ë™ëœ í”„ë¡œì íŠ¸",
        "í´ë¼ìš°ë“œÂ·ë°°í¬Â·ìš´ì˜ ì¤‘ì‹¬ í”„ë¡œì íŠ¸"
      ]
    },

    // 10. í˜‘ì—…Â·ê°œë°œ ë„êµ¬ ê²½í—˜
    {
      id: "toolExp",
      q: "ì‚¬ìš©í•´ë³¸ í˜‘ì—…Â·ê°œë°œ ë„êµ¬ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
      a: [
        "Git ê¸°ë³¸ ì‚¬ìš© ê²½í—˜ì´ ìˆì–´ìš”",
        "GitHub/GitLab ë“±ìœ¼ë¡œ í˜‘ì—…í•´ë³¸ ê²½í—˜ì´ ìˆì–´ìš”",
        "Notion / Jira ë“± í˜‘ì—… ë„êµ¬ë¥¼ ì‚¬ìš©í•´ë´¤ì–´ìš”",
        "ë°ì´í„°ë² ì´ìŠ¤(MySQL, MongoDB ë“±)ë¥¼ ì‚¬ìš©í•´ë´¤ì–´ìš”",
        "Dockerë¥¼ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆì–´ìš”",
        "AWS/GCP/Naver Cloud ë“± í´ë¼ìš°ë“œë¥¼ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆì–´ìš”",
        "CI/CD í™˜ê²½ì„ êµ¬ì„±í•´ë³¸ ê²½í—˜ì´ ìˆì–´ìš”",
        "ì‚¬ìš© ê²½í—˜ì´ ê±°ì˜ ì—†ì–´ìš”"
      ],
      multiple: true
    },

    // 11. í•™ìŠµ ìŠ¤íƒ€ì¼
    {
      id: "learningStyle",
      q: "ê°œë°œì„ ë°°ìš¸ ë•Œ ì–´ë–¤ ë°©ì‹ì´ ê°€ì¥ ì˜ ë§ë‚˜ìš”?",
      a: [
        "ì§ì ‘ ë§Œë“¤ì–´ë³´ë©´ì„œ ë°°ìš°ëŠ” í¸ì´ì—ìš”",
        "ë¬¸ì„œÂ·ì±…ìœ¼ë¡œ ê°œë…ì„ ë¨¼ì € ì´í•´í•˜ëŠ” í¸ì´ì—ìš”",
        "ë¬¸ì œ í’€ì´Â·ì‹¤ìŠµ ì¤‘ì‹¬ìœ¼ë¡œ ë°°ìš°ëŠ” í¸ì´ì—ìš”",
        "ê°•ì˜Â·íŠœí† ë¦¬ì–¼ë¡œ ë¹ ë¥´ê²Œ ê°ì„ ì¡ëŠ” í¸ì´ì—ìš”",
        "ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ì„ì–´ì„œ ë°°ìš°ëŠ” í¸ì´ì—ìš”"
      ]
    },

    // 12. ì„ í˜¸ ê°œë°œ í™˜ê²½
    {
      id: "devEnvironment",
      q: "ì„ í˜¸í•˜ëŠ” ê°œë°œ í™˜ê²½ì€ ë¬´ì—‡ì¸ê°€ìš”?",
      a: [
        "Windows í™˜ê²½ì´ í¸í•´ìš”",
        "Mac í™˜ê²½ì´ í¸í•´ìš”",
        "Linux í™˜ê²½ì´ í¸í•´ìš”",
        "í¬ê²Œ ìƒê´€ì—†ì–´ìš”"
      ]
    },

    // 13. íŒ€ / í˜¼ì
    {
      id: "teamStyle",
      q: "ì–´ë–¤ ê°œë°œ ìŠ¤íƒ€ì¼ì´ ë” ì˜ ë§ë‚˜ìš”?",
      a: [
        "í˜¼ìì„œ ì°¨ë¶„íˆ ì§„í–‰í•˜ëŠ” í¸ì´ì—ìš”",
        "ì‘ì€ íŒ€ì—ì„œ í•¨ê»˜ í˜‘ì—…í•˜ëŠ” í¸ì´ ì¢‹ì•„ìš”",
        "ì—¬ëŸ¬ íŒ€ê³¼ í•¨ê»˜ ì›€ì§ì´ëŠ” í° í”„ë¡œì íŠ¸ë„ ê´œì°®ì•„ìš”",
        "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
      ]
    },

    // 14. í•™ìŠµ ì‹œê°„
    {
      id: "studyTime",
      q: "ì•ìœ¼ë¡œ ê°œë°œ í•™ìŠµì— íˆ¬ìí•  ìˆ˜ ìˆëŠ” ì‹œê°„ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
      a: [
        "ì£¼ 5ì‹œê°„ ë¯¸ë§Œ",
        "ì£¼ 5~10ì‹œê°„",
        "ì£¼ 10~20ì‹œê°„",
        "ì£¼ 20ì‹œê°„ ì´ìƒ"
      ]
    },

    // 15. ë‹¨ê¸° ëª©í‘œ
    {
      id: "shortTermGoal",
      q: "ì•ìœ¼ë¡œ 6ê°œì›”~1ë…„ ë™ì•ˆ ì´ë£¨ê³  ì‹¶ì€ ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
      a: [
        "ê°œë°œ ê¸°ì´ˆë¥¼ ë‹¤ì§€ê³  ë‚˜ì—ê²Œ ë§ëŠ” ë°©í–¥ì„ ì°¾ê³  ì‹¶ì–´ìš”",
        "í¬íŠ¸í´ë¦¬ì˜¤ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì–´ìš”",
        "ì¸í„´ ë˜ëŠ” ì£¼ë‹ˆì–´ ê°œë°œìë¡œ ì·¨ì—…í•˜ê³  ì‹¶ì–´ìš”",
        "ê¸°ì¡´ ì»¤ë¦¬ì–´ì— ê°œë°œ ì—­ëŸ‰ì„ ë”í•˜ê³  ì‹¶ì–´ìš”",
        "ë‚˜ë§Œì˜ ì„œë¹„ìŠ¤ë‚˜ ì•±ì„ ì¶œì‹œí•´ë³´ê³  ì‹¶ì–´ìš”"
      ]
    },

    // 17. ì¥ê¸° ëª©í‘œ
    {
      id: "careerGoal",
      q: "ì¥ê¸°ì ìœ¼ë¡œ ì–´ë–¤ ì»¤ë¦¬ì–´ ë°©í–¥ì„ ì›í•˜ì‹œë‚˜ìš”?",
      a: [
        "íŠ¹ì • ë¶„ì•¼ì˜ ì „ë¬¸ ê°œë°œìë¡œ ì„±ì¥í•˜ê³  ì‹¶ì–´ìš”",
        "ì—¬ëŸ¬ ê¸°ìˆ ì„ ìµíŒ ì˜¬ë¼ìš´ë” ê°œë°œìê°€ ë˜ê³  ì‹¶ì–´ìš”",
        "ë‚˜ë§Œì˜ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“œëŠ” ì°½ì—…í˜• ê°œë°œìê°€ ë˜ê³  ì‹¶ì–´ìš”",
        "ì•ˆì •ì ì¸ ê¸°ì—…ì— ì·¨ì—…í•´ ì»¤ë¦¬ì–´ë¥¼ ìŒ“ê³  ì‹¶ì–´ìš”"
      ]
    },
    
    // 16. ê°œë°œ ëª©ì 
    {
      id: "purpose",
      q: "ê°œë°œì„ ë°°ìš°ëŠ” ì£¼ëœ ëª©ì ì€ ë¬´ì—‡ì¸ê°€ìš”? (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)",
      a: [
        "ê°œë°œìë¡œ ì·¨ì—…í•˜ê±°ë‚˜ ì´ì§í•˜ê¸° ìœ„í•´ì„œì˜ˆìš”",
        "ìŠ¤íƒ€íŠ¸ì—…Â·ì´ˆê¸° íŒ€ì— í•©ë¥˜í•˜ê³  ì‹¶ì–´ìš”",
        "ì§ì ‘ ì°½ì—…í•´ì„œ ë‚˜ë§Œì˜ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  ì‹¶ì–´ìš”",
        "í¬íŠ¸í´ë¦¬ì˜¤ìš© ë˜ëŠ” ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  ì‹¶ì–´ìš”",
        "ì „ê³µ ê³µë¶€Â·í•™ì Â·ëŒ€í•™ì›/ì—°êµ¬ë¥¼ ìœ„í•´ í•„ìš”í•´ì„œì˜ˆìš”",
        "í˜„ì¬ ì—…ë¬´ ìë™í™”Â·íš¨ìœ¨í™”ë¥¼ ìœ„í•´ ë°°ìš°ê³  ìˆì–´ìš”",
        "ì·¨ë¯¸ë¡œ ì¦ê¸°ë©´ì„œ ì²œì²œíˆ ë°°ìš°ê³  ì‹¶ì–´ìš”",
        "ìê¸° ê³„ë°œì„ ìœ„í•´ ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ìš°ê³  ì‹¶ì–´ìš”"
      ],
      multiple: true
    },

    // 18. ê´€ì‹¬ ìˆëŠ” ì–¸ì–´
    {
      id: "wishLangs",
      q: "ì•ìœ¼ë¡œ ë°°ìš°ê±°ë‚˜ ë” ê¹Šê²Œ ê³µë¶€í•´ë³´ê³  ì‹¶ì€ ì–¸ì–´ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
      a: [
        "JavaScript / TypeScript",
        "Python",
        "Java",
        "Go",
        "Rust",
        "Kotlin / Swift",
        "C / C++",
        "C#",
        "ê¸°íƒ€"
      ],
      multiple: true
    }
  ];

  
  const quizData_jobs = {
    //ì›¹ ê°œë°œì
    web: [
      {
        id: "web_area",
        q: "ì›¹ ê°œë°œ ì¤‘ ì–´ë–¤ ë¶„ì•¼ì— ë” í¥ë¯¸ê°€ ìˆìœ¼ì‹ ê°€ìš”?",
        a: ["í”„ë¡ íŠ¸ì—”ë“œ (í™”ë©´ / UI êµ¬í˜„)", 
          "ë°±ì—”ë“œ (ì„œë²„ / ë°ì´í„° ì²˜ë¦¬)", 
          "í’€ìŠ¤íƒ (ë‘˜ ë‹¤)", 
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      }
    ],

    //ëª¨ë°”ì¼ ì•± ê°œë°œì
    mobile: [
      {
        id: "mobile_platform",
        q: "ì–´ë–¤ í”Œë«í¼ ê°œë°œì— ë” ê´€ì‹¬ ìˆìœ¼ì‹ ê°€ìš”?",
        a: [
          "Android", 
          "iOS", 
          "Cross-platform (Flutter, React Native ë“±)", 
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      },
      {
        id: "mobile_ui_focus",
        q: "ëª¨ë°”ì¼ UI/UX êµ¬í˜„ì—ì„œ ì–´ë–¤ ìš”ì†Œê°€ ë” í¥ë¯¸ë¡­ë‚˜ìš”?",
        a: [
          "ì• ë‹ˆë©”ì´ì…˜Â·íŠ¸ëœì§€ì…˜",
          "í™”ë©´ êµ¬ì„±Â·ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°",
          "ë°˜ì‘í˜• / ë‹¤ì–‘í•œ í•´ìƒë„ ëŒ€ì‘",
          "ì ‘ê·¼ì„± ê³ ë ¤",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "mobile_logic",
        q: "ì•± ê¸°ëŠ¥ êµ¬í˜„ ì¤‘ ì–´ë–¤ ë¶€ë¶„ì´ ë” í¥ë¯¸ë¡­ë‚˜ìš”?",
        a: [
          "API ì—°ë™ ë° ë°ì´í„° ì²˜ë¦¬",
          "ìƒíƒœ ê´€ë¦¬(BLoC, Redux ë“±)",
          "ì‹¤ì‹œê°„ ê¸°ëŠ¥(WebSocket)",
          "í‘¸ì‹œ ì•Œë¦¼ / ì¸ì¦ ì²˜ë¦¬",
          "ê¸°ê¸° ì„¼ì„œ í™œìš©(GPS, ì¹´ë©”ë¼ ë“±)"
        ],
        multiple: true
      },
      {
        id: "mobile_stack_interest",
        q: "ë°°ì›Œë³´ê³  ì‹¶ì€ ëª¨ë°”ì¼ ê¸°ìˆ ì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "Swift", 
          "Kotlin", 
          "Flutter", 
          "React Native", 
          "Jetpack Compose", 
          "SwiftUI", 
          "ê¸°íƒ€"
        ],
        multiple: true
      },
      {
        id: "mobile_app_features",
        q: "ê°œë°œí•´ë³´ê³  ì‹¶ì€ ì•± ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "SNS / ì»¤ë®¤ë‹ˆí‹°",
          "ì´ì»¤ë¨¸ìŠ¤ / ì‡¼í•‘",
          "êµìœ¡ / ìƒì‚°ì„±",
          "ê²Œì„í˜• ì¸í„°ë™í‹°ë¸Œ ì•±",
          "í—¬ìŠ¤/í”¼íŠ¸ë‹ˆìŠ¤",
          "IoT ì—°ë™ ì•±"
        ],
        multiple: true
      },
      {
        id: "mobile_deploy",
        q: "ì•± ë°°í¬ ë˜ëŠ” í…ŒìŠ¤íŠ¸ ê²½í—˜ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
        a: [
          "ë°°í¬ ê²½í—˜ ì—†ìŒ",
          "ë‚´ ê¸°ê¸°ì—ì„œ í…ŒìŠ¤íŠ¸í•´ë³¸ ì  ìˆì–´ìš”",
          "í…ŒìŠ¤íŠ¸í”Œë¼ì´íŠ¸/ë‚´ë¶€ í…ŒìŠ¤íŠ¸ í•´ë´¤ì–´ìš”",
          "ìŠ¤í† ì–´ì— ì‹¤ì œ ë“±ë¡í•´ë³¸ ê²½í—˜ ìˆì–´ìš”"
        ]
      },
      {
        id: "mobile_career",
        q: "ì–´ë–¤ ëª¨ë°”ì¼ ê°œë°œìë¡œ ì„±ì¥í•˜ê³  ì‹¶ë‚˜ìš”?",
        a: [
          "iOS ì „ë¬¸ ê°œë°œì",
          "Android ì „ë¬¸ ê°œë°œì",
          "í¬ë¡œìŠ¤í”Œë«í¼ ì—”ì§€ë‹ˆì–´",
          "í’€ìŠ¤íƒ ì•± ê°œë°œì",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      }
    ],

    //AI ê°œë°œì
    ai: [
      {
        id: "ai_domain",
        q: "AI ë¶„ì•¼ ì¤‘ ì–´ë–¤ ì˜ì—­ì— ë” ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?",
        a: [
          "ë¨¸ì‹ ëŸ¬ë‹",
          "ë”¥ëŸ¬ë‹",
          "ìì—°ì–´ ì²˜ë¦¬(NLP)",
          "ì»´í“¨í„° ë¹„ì „(CV)",
          "ë°ì´í„° ë¶„ì„/ì‹œê°í™”",
          "ì¶”ì²œ ì‹œìŠ¤í…œ",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "ai_math_level",
        q: "ìˆ˜í•™ì  ë°°ê²½(ì„ í˜•ëŒ€ìˆ˜, í†µê³„, ë¯¸ì ë¶„)ì— ëŒ€í•œ ì´í•´ ì •ë„ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.",
        a: [
          "ê±°ì˜ ëª¨ë¦„",
          "ê¸°ì´ˆ ê°œë…ì€ ì•Œì•„ìš”",
          "ë¨¸ì‹ ëŸ¬ë‹ ìˆ˜í•™ì„ ë”°ë¼ê°ˆ ìˆ˜ ìˆìŒ",
          "ë”¥ëŸ¬ë‹ë„ ìˆ˜ì‹ê¹Œì§€ ì´í•´ ê°€ëŠ¥",
          "ì „ë¬¸ ìˆ˜ì¤€"
        ]
      },
      {
        id: "ai_stack_interest",
        q: "ì‚¬ìš©í•´ë³´ê³  ì‹¶ê±°ë‚˜ ê²½í—˜í•´ë³¸ AI/ë°ì´í„° ê¸°ìˆ ì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "Pandas / NumPy",
          "Scikit-learn",
          "PyTorch",
          "TensorFlow",
          "OpenAI API / LLM",
          "ë°ì´í„° ì‹œê°í™”(Matplotlib/Seaborn/Plotly)",
          "ê¸°íƒ€"
        ],
        multiple: true
      },
      {
        id: "ai_train_exp",
        q: "AI ëª¨ë¸ í•™ìŠµ ë˜ëŠ” ì‹¤í—˜ ê²½í—˜ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
        a: [
          "ì•„ì§ í•´ë³¸ ì  ì—†ì–´ìš”",
          "íŠœí† ë¦¬ì–¼ ì •ë„ ë”°ë¼ê°€ë´¤ì–´ìš”",
          "ê°„ë‹¨í•œ ëª¨ë¸ì„ ì§ì ‘ ë§Œë“¤ì–´ í•™ìŠµí•´ë´¤ì–´ìš”",
          "ë”¥ëŸ¬ë‹ ëª¨ë¸ì„ ì§ì ‘ ì„¤ê³„Â·íŠœë‹í•´ë³¸ ê²½í—˜ ìˆìŒ"
        ]
      },
      {
        id: "ai_data_exp",
        q: "ë°ì´í„° ê´€ë ¨ ê²½í—˜ì´ ìˆë‹¤ë©´ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "ë°ì´í„° ìˆ˜ì§‘/ì›¹ í¬ë¡¤ë§",
          "ì „ì²˜ë¦¬/ì •ì œ",
          "EDA(íƒìƒ‰ì  ë¶„ì„)",
          "íŠ¹ì§• ê³µí•™(Feature Engineering)",
          "ëª¨ë¦„/ì—†ìŒ"
        ],
        multiple: true
      },
      {
        id: "ai_use_case",
        q: "AIë¡œ ê°€ì¥ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì€ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?",
        a: [
          "ì±—ë´‡/LLM ê¸°ë°˜ ì„œë¹„ìŠ¤",
          "ì´ë¯¸ì§€ ë¶„ì„ ëª¨ë¸",
          "ì¶”ì²œ ì‹œìŠ¤í…œ",
          "ìŒì„±/ìì—°ì–´ ì²˜ë¦¬",
          "ë°ì´í„° ë¶„ì„ ë¦¬í¬íŠ¸",
          "ê²Œì„Â·ë¡œë´‡ ê´€ë ¨ AI"
        ],
        multiple: true
      },
      {
        id: "ai_career_goal",
        q: "AI ì»¤ë¦¬ì–´ ëª©í‘œì— ê°€ì¥ ê°€ê¹Œìš´ ê²ƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "AI ì—”ì§€ë‹ˆì–´/ML ì—”ì§€ë‹ˆì–´",
          "ë°ì´í„° ê³¼í•™ì",
          "LLM/ë”¥ëŸ¬ë‹ ëª¨ë¸ ì—°êµ¬ì",
          "MLOps ì—”ì§€ë‹ˆì–´",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      }
    ],

    //ê²Œì„ ê°œë°œì
    game: [
      {
        id: "game_type",
        q: "ì–´ë–¤ ì¢…ë¥˜ì˜ ê²Œì„ ê°œë°œì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?",
        a: ["2D", "3D", "ëª¨ë°”ì¼", "ë©€í‹°í”Œë ˆì´ ì˜¨ë¼ì¸ ê²Œì„", "VR/AR", "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"],
        multiple: true
      },
      {
        id: "game_engine",
        q: "ì‚¬ìš©í•´ë³´ê³  ì‹¶ê±°ë‚˜ ê²½í—˜í•´ë³¸ ê²Œì„ ì—”ì§„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: ["Unity", "Unreal", "Godot", "Custom Engine", "ëª¨ë¦„/ì—†ìŒ"],
        multiple: true
      },
      {
        id: "game_role",
        q: "ê²Œì„ ê°œë°œì—ì„œ ì–´ë–¤ ì—­í• ì— ê´€ì‹¬ ìˆë‚˜ìš”?",
        a: [
          "ê²Œì„ ë¡œì§/ì‹œìŠ¤í…œ êµ¬í˜„",
          "ê·¸ë˜í”½/ë Œë”ë§",
          "AI/ë¬¼ë¦¬ ì—”ì§„",
          "ë ˆë²¨ ë””ìì¸",
          "ê²Œì„ ì„œë²„",
          "ê¸°íš/ì‹œë‚˜ë¦¬ì˜¤"
        ],
        multiple: true
      },
      {
        id: "game_graphics_exp",
        q: "ê·¸ë˜í”½ ê´€ë ¨ ê¸°ìˆ  ê²½í—˜ì´ ìˆë‹¤ë©´ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: ["3D ëª¨ë¸ë§", "ì…°ì´ë”", "ë¬¼ë¦¬ ì—”ì§„", "ì• ë‹ˆë©”ì´ì…˜ ì‹œìŠ¤í…œ", "ì—†ì–´ìš”"],
        multiple: true
      },
      {
        id: "game_platform",
        q: "ê²Œì„ ê°œë°œì„ ì–´ë–¤ í”Œë«í¼ ì¤‘ì‹¬ìœ¼ë¡œ í•˜ê³  ì‹¶ë‚˜ìš”?",
        a: ["PC", "ëª¨ë°”ì¼", "ì½˜ì†”", "ì›¹ ê²Œì„", "VRÂ·AR"]
      },
      {
        id: "game_server_exp",
        q: "ê²Œì„ ì„œë²„ ë˜ëŠ” ì˜¨ë¼ì¸ ê¸°ëŠ¥ ê²½í—˜ì´ ìˆë‚˜ìš”?",
        a: [
          "ì—†ì–´ìš”",
          "ë¡œì»¬ ì €ì¥/ì‹±ê¸€í”Œë ˆì´ ì •ë„",
          "ê°„ë‹¨í•œ ì˜¨ë¼ì¸ ê¸°ëŠ¥ êµ¬í˜„ ê²½í—˜ ìˆìŒ",
          "ì „ë¬¸ì ì¸ ê²Œì„ ì„œë²„ ê°œë°œ ê²½í—˜ ìˆìŒ"
        ]
      },
      {
        id: "game_goal",
        q: "ê²Œì„ ê°œë°œìë¡œì„œì˜ ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
        a: [
          "ì¸ë””ê²Œì„ ê°œë°œ",
          "AAA ê²Œì„ ê°œë°œ",
          "ëª¨ë°”ì¼ ê²Œì„ ê°œë°œ",
          "ê²Œì„ ì„œë²„/í”Œë«í¼ ê°œë°œ",
          "ë©€í‹°í”Œë ˆì´ ì‹œìŠ¤í…œ ì „ë¬¸ ì—”ì§€ë‹ˆì–´"
        ]
      }
    ],

    //ë³´ì•ˆì „ë¬¸ê°€
    security: [
      {
        id: "sec_area",
        q: "ë³´ì•ˆ ë¶„ì•¼ ì¤‘ ì–´ë–¤ ì˜ì—­ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?",
        a: [
          "ì›¹ ë³´ì•ˆ",
          "ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ",
          "ì‹œìŠ¤í…œ ë³´ì•ˆ",
          "ì·¨ì•½ì  ë¶„ì„",
          "ëª¨ì˜ í•´í‚¹(íœí…ŒìŠ¤íŠ¸)",
          "ë””ì§€í„¸ í¬ë Œì‹",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "sec_cert_plan",
        q: "ì·¨ë“ì„ ê³ ë ¤ ì¤‘ì¸ ë³´ì•ˆ ìê²©ì¦ì´ ìˆë‚˜ìš”?",
        a: ["ì •ë³´ë³´ì•ˆê¸°ì‚¬", "OSCP", "CEH", "CISSP", "ë”°ë¡œ ì—†ì–´ìš”"]
      },
      {
        id: "sec_tools",
        q: "ì‚¬ìš©í•´ë³¸ ë³´ì•ˆ ê´€ë ¨ ë„êµ¬ê°€ ìˆë‹¤ë©´ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "BurpSuite",
          "Metasploit",
          "Nmap",
          "Wireshark",
          "Kali Linux",
          "ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "sec_os",
        q: "ë¦¬ëˆ…ìŠ¤ í™˜ê²½ ê²½í—˜ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
        a: [
          "ê±°ì˜ ì—†ìŒ",
          "ê¸°ë³¸ ëª…ë ¹ì–´ ì •ë„",
          "ì›¹ ì„œë²„ ì„¸íŒ… ê°€ëŠ¥",
          "ë³´ì•ˆ ë„êµ¬/ìŠ¤í¬ë¦½íŠ¸ í™œìš© ê°€ëŠ¥",
          "ì „ë¬¸ ìˆ˜ì¤€"
        ]
      },
      {
        id: "sec_interest",
        q: "ë³´ì•ˆ í”„ë¡œì íŠ¸ ì¤‘ ì–´ë–¤ ê²½í—˜ì„ í•˜ê³  ì‹¶ë‚˜ìš”?",
        a: [
          "ì·¨ì•½ì  ì§„ë‹¨",
          "ë¡œê·¸ ë¶„ì„/ì¹¨í•´ ëŒ€ì‘",
          "ë³´ì•ˆ ì‹œìŠ¤í…œ êµ¬ì¶•",
          "ë³´ì•ˆ ìë™í™”",
          "CTF ë„ì „",
          "í¬ë Œì‹ ë¶„ì„"
        ],
        multiple: true
      },
      {
        id: "sec_dev_interest",
        q: "ë³´ì•ˆ ê°œë°œ ê´€ë ¨ ê´€ì‹¬ ë¶„ì•¼ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "ë³´ì•ˆ ìë™í™” ìŠ¤í¬ë¦½íŒ…",
          "ì‹œíì–´ ì½”ë”©",
          "ì•”í˜¸í•™",
          "API ë³´ì•ˆ",
          "ì·¨ì•½ì  íŒ¨ì¹˜ ê°œë°œ"
        ],
        multiple: true
      },
      {
        id: "sec_career_goal",
        q: "ì–´ë–¤ ë³´ì•ˆ ì „ë¬¸ê°€ë¥¼ ëª©í‘œë¡œ í•˜ê³  ìˆë‚˜ìš”?",
        a: [
          "í™”ì´íŠ¸í–‡ í•´ì»¤Â·íœí…ŒìŠ¤í„°",
          "ë³´ì•ˆ ì—”ì§€ë‹ˆì–´",
          "ë³´ì•ˆ ê´€ì œ/ì¹¨í•´ ëŒ€ì‘",
          "ë³´ì•ˆ ì•„í‚¤í…íŠ¸",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      }
    ],

    //ì„ë² ë””ë“œ / IoT ê°œë°œì
    embedded: [
      {
        id: "emb_area",
        q: "ì„ë² ë””ë“œ ë¶„ì•¼ ì¤‘ ì–´ë–¤ ì˜ì—­ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?",
        a: ["IoT ê¸°ê¸°", "ë¡œë´‡ ì œì–´", "ìë™ì°¨Â·ADAS", "íŒì›¨ì–´ ê°œë°œ", "ì‚°ì—…ìš© ì‹œìŠ¤í…œ"],
        multiple: true
      },
      {
        id: "emb_lang_exp",
        q: "C/C++ ë“± ì €ìˆ˜ì¤€ ì–¸ì–´ ê²½í—˜ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
        a: [
          "ì—†ì–´ìš”",
          "ê¸°ì´ˆ ë¬¸ë²• ì •ë„",
          "ê°„ë‹¨í•œ ì„ë² ë””ë“œ í”„ë¡œì íŠ¸ ê²½í—˜",
          "ì‹¤ë¬´ ìˆ˜ì¤€ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆì–´ìš”"
        ]
      },
      {
        id: "emb_board_exp",
        q: "ë‹¤ë¤„ë³¸ ë³´ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "Arduino",
          "Raspberry Pi",
          "ESP32",
          "STM32",
          "Jetson Nano",
          "ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "emb_os",
        q: "ì‚¬ìš©í•´ë³¸ ìš´ì˜ í™˜ê²½ì´ ìˆë‹¤ë©´ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "Bare-metal(ë¹„OS)",
          "RTOS(FreeRTOS ë“±)",
          "Linux ê¸°ë°˜ ì‹œìŠ¤í…œ",
          "ëª¨ë¦„/ì—†ìŒ"
        ],
        multiple: true
      },
      {
        id: "emb_connect",
        q: "ê´€ë ¨ ê¸°ìˆ  ì¤‘ ê´€ì‹¬ ìˆëŠ” ê²ƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "ì„¼ì„œ ì—°ë™",
          "BLE/Wi-Fi/Zigbee í†µì‹ ",
          "ì¹´ë©”ë¼/ì˜ìƒ ì²˜ë¦¬",
          "í•˜ë“œì›¨ì–´ ë“œë¼ì´ë²„ ê°œë°œ",
          "ì „ì›/ì „ë ¥ ê´€ë¦¬"
        ],
        multiple: true
      },
      {
        id: "emb_stack_interest",
        q: "ë°°ì›Œë³´ê³  ì‹¶ì€ ê¸°ìˆ  ìŠ¤íƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: ["C/C++", "Python", "Rust", "RTOS", "ROS", "ê¸°íƒ€"],
        multiple: true
      },
      {
        id: "emb_career",
        q: "ì„ë² ë””ë“œ ì»¤ë¦¬ì–´ ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
        a: [
          "íŒì›¨ì–´ ì—”ì§€ë‹ˆì–´",
          "IoT ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´",
          "ë¡œë´‡ ì œì–´ ì—”ì§€ë‹ˆì–´",
          "ì„ë² ë””ë“œ ë¦¬ëˆ…ìŠ¤ ê°œë°œì",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      }
    ],

    //ë°ë¸Œì˜µìŠ¤ / í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´
    devops: [
      {
        id: "devops_focus",
        q: "ì–´ë–¤ ë°ë¸Œì˜µìŠ¤/í´ë¼ìš°ë“œ ë¶„ì•¼ì— ë” ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?",
        a: [
          "CI/CD ìë™í™”",
          "Docker/Kubernetes ì»¨í…Œì´ë„ˆ",
          "IaC(Terraform, Ansible)",
          "SREÂ·ëª¨ë‹ˆí„°ë§Â·ë¡œê¹…",
          "í´ë¼ìš°ë“œ ì•„í‚¤í…ì²˜(AWS/GCP/Azure)"
        ],
        multiple: true
      },
      {
        id: "devops_cloud",
        q: "ê²½í—˜í•´ë³´ê³  ì‹¶ì€ í´ë¼ìš°ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: ["AWS", "GCP", "Azure", "Naver Cloud", "ê¸°íƒ€"],
        multiple: true
      },
      {
        id: "devops_experience",
        q: "ë°°í¬/ìë™í™” ê´€ë ¨ ê²½í—˜ ìˆ˜ì¤€ì€?",
        a: [
          "ì•„ì§ ê²½í—˜ ì—†ìŒ",
          "Docker ê¸°ë³¸ ì‚¬ìš© ê°€ëŠ¥",
          "CI/CD(ë°±ì—”ë“œ/í”„ë¡ íŠ¸) êµ¬ì¶• ê²½í—˜ ìˆìŒ",
          "Kubernetes í´ëŸ¬ìŠ¤í„° ìš´ì˜ ê²½í—˜ ìˆìŒ"
        ]
      },
      {
        id: "devops_tools",
        q: "ì‚¬ìš©í•´ë³¸ DevOps ë„êµ¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "GitHub Actions",
          "Jenkins",
          "Terraform",
          "Ansible",
          "Prometheus/Grafana",
          "Helm",
          "Linux ì„œë²„ ê´€ë¦¬",
          "ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "devops_challenge",
        q: "ì–´ë ¤ì›€ì„ ëŠë¼ëŠ” ë¶€ë¶„ì´ ìˆë‹¤ë©´?",
        a: [
          "Linux í™˜ê²½ì— ìµìˆ™í•˜ì§€ ì•ŠìŒ",
          "ë„¤íŠ¸ì›Œí¬ ì´í•´ë„ê°€ ë¶€ì¡±í•¨",
          "ì»¨í…Œì´ë„ˆÂ·K8sê°€ ì–´ë µë‹¤",
          "ë°°í¬ ìë™í™” ê°œë…ì´ ë¶€ì¡±í•¨",
          "íŠ¹ë³„íˆ ì—†ìŒ"
        ],
        multiple: true
      },
      {
        id: "devops_role",
        q: "ê°€ì¥ ê´€ì‹¬ ìˆëŠ” ì—­í• ì„ ì•Œë ¤ì£¼ì„¸ìš”.",
        a: [
          "DevOps ì—”ì§€ë‹ˆì–´",
          "SRE(Site Reliability Engineer)",
          "í´ë¼ìš°ë“œ ì•„í‚¤í…íŠ¸",
          "í”Œë«í¼ ì—”ì§€ë‹ˆì–´",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      },
      {
        id: "devops_goal",
        q: "ë°ë¸Œì˜µìŠ¤ ë¶„ì•¼ì—ì„œì˜ ìµœì¢… ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
        a: [
          "ì• í”Œë¦¬ì¼€ì´ì…˜ ìë™ ë°°í¬ í™˜ê²½ êµ¬ì¶•",
          "Kubernetes ì „ë¬¸ ì—”ì§€ë‹ˆì–´",
          "ëŒ€í˜• ì‹œìŠ¤í…œì˜ SRE ì—­í• ",
          "í´ë¼ìš°ë“œ ì•„í‚¤í…íŠ¸ë¡œ ì„±ì¥",
          "ìŠ¤íƒ€íŠ¸ì—… ê¸°ìˆ  ì¸í”„ë¼ ì´ê´„"
        ]
      }
    ]
  };

  // ì›¹ ì§êµ° ë‚´ ì„¸ë¶€ ì—­í• ë³„ ì¶”ê°€ ì§ˆë¬¸
  const webSubQuestions = {
    //í”„ë¡ íŠ¸ì—”ë“œ
    frontend: [
      {
        id: "web_fe_ui_focus",
        q: "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì—ì„œ ì–´ë–¤ ë¶€ë¶„ì´ ë” í¥ë¯¸ë¡­ë‚˜ìš”? (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)",
        a: [
          "UI/UX êµ¬í˜„ê³¼ ì»´í¬ë„ŒíŠ¸ ì œì‘",
          "ìƒíƒœ ê´€ë¦¬ì™€ ì „ì—­ êµ¬ì¡° ì„¤ê³„",
          "ì• ë‹ˆë©”ì´ì…˜Â·ì¸í„°ë™ì…˜",
          "ë°ì´í„° ì‹œê°í™”/ì°¨íŠ¸",
          "ì›¹ ì ‘ê·¼ì„± í–¥ìƒ",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_fe_stack",
        q: "ê´€ì‹¬ ìˆëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê¸°ìˆ  ìŠ¤íƒì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "React",
          "Next.js",
          "Vue",
          "Svelte",
          "TypeScript",
          "TailwindCSS",
          "SCSS",
          "Storybook",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_fe_level",
        q: "í”„ë¡ íŠ¸ì—”ë“œ ê´€ë ¨ í•™ìŠµ/ê°œë°œ ê²½í—˜ ìˆ˜ì¤€ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
        a: [
          "HTML/CSS ê¸°ë³¸ë§Œ ì•Œê³  ìˆì–´ìš”",
          "ê°„ë‹¨í•œ ì›¹í˜ì´ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”",
          "React/Vue íŠœí† ë¦¬ì–¼ ì •ë„ëŠ” í•´ë´¤ì–´ìš”",
          "ìƒíƒœê´€ë¦¬Â·ë¼ìš°íŒ… ë“± êµ¬ì¡°ë„ ë‹¤ë¤„ë´¤ì–´ìš”",
          "ì¤‘í˜• ê·œëª¨ í”„ë¡œì íŠ¸ ê²½í—˜ì´ ìˆì–´ìš”"
        ]
      },
      {
        id: "web_fe_challenge",
        q: "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì—ì„œ ì–´ë ¤ì›€ì„ ëŠë¼ëŠ” ë¶€ë¶„ì´ ìˆë‹¤ë©´ ë¬´ì—‡ì¸ê°€ìš”? (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)",
        a: [
          "ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ êµ¬ì„±",
          "ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° ì„¤ê³„",
          "ìƒíƒœ ê´€ë¦¬",
          "API ì—°ë™",
          "ì„±ëŠ¥ ìµœì í™”",
          "ë””ìì¸ êµ¬í˜„(Figma) ë”°ë¼ê°€ê¸°",
          "íŠ¹ë³„íˆ ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_fe_tools",
        q: "ì‚¬ìš©í•´ë³¸ í”„ë¡ íŠ¸ì—”ë“œ ë„êµ¬ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "Webpack / Vite ë“± ë²ˆë“¤ëŸ¬",
          "ESLint / Prettier",
          "Gitì„ ì‚¬ìš©í•œ í˜‘ì—…",
          "Figmaë¥¼ ë³´ê³  í™”ë©´ êµ¬í˜„",
          "UI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©(AntD, MUI ë“±)",
          "ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì„± ê²½í—˜",
          "ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_fe_priority",
        q: "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì—ì„œ ì–´ë–¤ ì—­ëŸ‰ì„ ê°€ì¥ ìš°ì„ ì ìœ¼ë¡œ í‚¤ìš°ê³  ì‹¶ë‚˜ìš”?",
        a: [
          "React / Vue ìˆ™ë ¨ë„",
          "TypeScript ê¸°ë°˜ ê°œë°œ",
          "ì›¹ ì„±ëŠ¥ ìµœì í™”",
          "ë°˜ì‘í˜•Â·í¬ë¡œìŠ¤ë¸Œë¼ìš°ì§•",
          "ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì¶•",
          "í˜‘ì—…Â·ì½”ë“œ í’ˆì§ˆ(í…ŒìŠ¤íŠ¸, ë¬¸ì„œí™”)"
        ]
      },
      {
        id: "web_fe_career",
        q: "í”„ë¡ íŠ¸ì—”ë“œ ê´€ë ¨ ì–´ë–¤ ì»¤ë¦¬ì–´ ë°©í–¥ì´ ê´€ì‹¬ ìˆë‚˜ìš”?",
        a: [
          "UI ì¤‘ì‹¬ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì",
          "í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…íŠ¸",
          "ì›¹ í¼í¬ë¨¼ìŠ¤ ì—”ì§€ë‹ˆì–´",
          "ë””ìì¸ ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´",
          "í’€ìŠ¤íƒ ê°œë°œìë¡œ í™•ì¥",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      }
    ],

    //ë°±ì—”ë“œ
    backend: [
      {
        id: "web_be_focus",
        q: "ë°±ì—”ë“œ ê°œë°œì—ì„œ ì–´ë–¤ ë¶€ë¶„ì´ ê°€ì¥ í¥ë¯¸ë¡­ë‚˜ìš”? (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)",
        a: [
          "REST API ì„¤ê³„",
          "DB ëª¨ë¸ë§Â·ì¿¼ë¦¬ ìµœì í™”",
          "ì¸ì¦/ë³´ì•ˆ(JWT, OAuth ë“±)",
          "ì‹¤ì‹œê°„ ê¸°ëŠ¥(WebSocket)",
          "ì„œë²„ ì•„í‚¤í…ì²˜ ì„¤ê³„",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_be_stack",
        q: "ê´€ì‹¬ ìˆëŠ” ë°±ì—”ë“œ ê¸°ìˆ  ìŠ¤íƒì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "Java / Spring Boot",
          "Node.js (Express/Nest)",
          "Python (Django/FastAPI)",
          "Go",
          "GraphQL",
          "Kotlin (Ktor/Spring)",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_be_level",
        q: "ë°±ì—”ë“œ ê°œë°œ ê²½í—˜ ìˆ˜ì¤€ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
        a: [
          "ì„œë²„ ê°œë°œ ê²½í—˜ì´ ì•„ì§ ì—†ì–´ìš”",
          "ê¸°ì´ˆ API ì •ë„ ë§Œë“¤ì–´ë´¤ì–´ìš”",
          "CRUDÂ·JWT ì¸ì¦Â·DB ì„¤ê³„ ê²½í—˜ ìˆì–´ìš”",
          "ì¤‘í˜• ê·œëª¨ ì„œë²„ êµ¬ì¶• ê²½í—˜ ìˆì–´ìš”",
          "ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ê³ ë ¤í•œ êµ¬ì¡°ë„ ì„¤ê³„í•´ë´¤ì–´ìš”"
        ]
      },
      {
        id: "web_be_db",
        q: "ì‚¬ìš©í•´ë³¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "MySQL / PostgreSQL",
          "MongoDB",
          "Redis",
          "ElasticSearch",
          "Firebase",
          "ì‚¬ìš© ê²½í—˜ ì—†ìŒ"
        ],
        multiple: true
      },
      {
        id: "web_be_tools",
        q: "ë°±ì—”ë“œ ê°œë°œ ê´€ë ¨ ì‚¬ìš© ê²½í—˜ì´ ìˆëŠ” ë„êµ¬ê°€ ìˆë‹¤ë©´ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "Docker",
          "AWS (EC2, S3, RDS ë“±)",
          "GCP ë˜ëŠ” Azure",
          "CI/CD(Jenkins/Github Actions)",
          "Postman / Swagger",
          "ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_be_priority",
        q: "ë°±ì—”ë“œ ì—­ëŸ‰ ì¤‘ ì–´ë–¤ ë¶€ë¶„ì„ ê°€ì¥ ê°•í™”í•˜ê³  ì‹¶ë‚˜ìš”?",
        a: [
          "Spring/Node/Python ë“± í”„ë ˆì„ì›Œí¬ ìˆ™ë ¨ë„",
          "DB ì„¤ê³„ ëŠ¥ë ¥",
          "ë³´ì•ˆÂ·ì¸ì¦",
          "ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ì•„í‚¤í…ì²˜ ì„¤ê³„",
          "í´ë¼ìš°ë“œ í™˜ê²½ ìš´ì˜",
          "í…ŒìŠ¤íŠ¸ ì½”ë“œÂ·ì½”ë“œ í’ˆì§ˆ"
        ]
      },
      {
        id: "web_be_career",
        q: "ë°±ì—”ë“œ ì»¤ë¦¬ì–´ ë°©í–¥ìœ¼ë¡œ ê´€ì‹¬ ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?",
        a: [
          "ì›¹ ì„œë¹„ìŠ¤ ë°±ì—”ë“œ ê°œë°œì",
          "ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì„œë²„ ê°œë°œì",
          "í´ë¼ìš°ë“œÂ·í”Œë«í¼ ì—”ì§€ë‹ˆì–´",
          "ë°ë¸Œì˜µìŠ¤ë¡œ í™•ì¥",
          "í’€ìŠ¤íƒìœ¼ë¡œ í™•ì¥",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      }
    ],

    //í’€ìŠ¤íƒ
    fullstack: [
      {
        id: "web_fs_balance",
        q: "í’€ìŠ¤íƒ ê°œë°œ ì‹œ ì–´ë–¤ ìª½ ë¹„ì¤‘ì„ ë‘ê³  ì‹¶ë‚˜ìš”?",
        a: [
          "í”„ë¡ íŠ¸ ë¹„ì¤‘ì´ ì¡°ê¸ˆ ë” ë†’ê²Œ",
          "ë°±ì—”ë“œ ë¹„ì¤‘ì´ ì¡°ê¸ˆ ë” ë†’ê²Œ",
          "ì „ì ìœ¼ë¡œ 5:5 ê· í˜• ìˆê²Œ",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      },
      {
        id: "web_fs_stack",
        q: "ì„ í˜¸í•˜ëŠ” í’€ìŠ¤íƒ ì¡°í•©ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "React + Node.js",
          "React + Spring Boot",
          "Vue + Node.js",
          "Next.js + NestJS",
          "Next.js + FastAPI",
          "ê¸°íƒ€",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_fs_flow",
        q: "í’€ìŠ¤íƒ í”„ë¡œì íŠ¸ì—ì„œ ì–´ë–¤ íë¦„ì„ ë” ì„ í˜¸í•˜ì‹œë‚˜ìš”?",
        a: [
          "í”„ë¡ íŠ¸ â†’ API â†’ DB ì „ì²´ í”Œë¡œìš° ì´í•´",
          "ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ í”„ë¡ íŠ¸/ë°± ëª¨ë‘ êµ¬í˜„",
          "í”„ë¡ íŠ¸ ì¤‘ì‹¬ + ê°€ë²¼ìš´ ë°±ì—”ë“œ",
          "ë°±ì—”ë“œ ì¤‘ì‹¬ + í•„ìš”í•œ í”„ë¡ íŠ¸ë§Œ"
        ]
      },
      {
        id: "web_fs_tools",
        q: "ì‚¬ìš©í•´ë³¸ í’€ìŠ¤íƒ ê´€ë ¨ ë„êµ¬ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.",
        a: [
          "React/Vue ë“± í”„ë¡ íŠ¸ í”„ë ˆì„ì›Œí¬",
          "Node/Spring/Python ë°±ì—”ë“œ",
          "Docker",
          "AWS ë°°í¬ ê²½í—˜",
          "CI/CD",
          "ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_fs_challenge",
        q: "í’€ìŠ¤íƒ ê°œë°œì—ì„œ ì–´ë ¤ìš´ ë¶€ë¶„ì´ ìˆë‹¤ë©´ ë¬´ì—‡ì¸ê°€ìš”? (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)",
        a: [
          "í”„ë¡ íŠ¸Â·ë°± ê°„ ì—­í•  ë¶„ë°°",
          "ë°ì´í„° íë¦„ ì„¤ê³„",
          "ìƒíƒœ ê´€ë¦¬",
          "ì„œë²„ êµ¬ì¡° ì„¤ê³„",
          "ë°°í¬/í™˜ê²½ êµ¬ì„±",
          "ì—†ì–´ìš”"
        ],
        multiple: true
      },
      {
        id: "web_fs_goal",
        q: "í’€ìŠ¤íƒ ê°œë°œìë¡œì„œ ì´ë£¨ê³  ì‹¶ì€ ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
        a: [
          "ì‘ì€ ì„œë¹„ìŠ¤ í•˜ë‚˜ë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì œì‘",
          "ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ìš© í’€ìŠ¤íƒ ëŠ¥ë ¥ í™•ë³´",
          "í”„ë¡ íŠ¸/ë°± ëª¨ë‘ ì£¼ë„í•  ìˆ˜ ìˆëŠ” ì—­ëŸ‰ í™•ë³´",
          "ìŠ¤íƒ€íŠ¸ì—…ì—ì„œ ë§ŒëŠ¥í˜• ê°œë°œìë¡œ ì„±ì¥",
          "ì•„ì§ ì˜ ëª¨ë¥´ê² ì–´ìš”"
        ]
      },
      {
        id: "web_fs_future",
        q: "ì•ìœ¼ë¡œ ì–´ë–¤ ë¶„ì•¼ë¡œ ë” í™•ì¥í•˜ê³  ì‹¶ë‚˜ìš”?",
        a: [
          "ê³ ê¸‰ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì",
          "ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ ì „ë¬¸ê°€",
          "ë°ë¸Œì˜µìŠ¤/í´ë¼ìš°ë“œ",
          "AI/ë°ì´í„° ì—”ì§€ë‹ˆì–´",
          "ì•„ì§ ê²°ì •í•˜ì§€ ëª»í–ˆì–´ìš”"
        ]
      }
    ]
  };


  const ROLE_TO_JOBKEY = {
    "ì›¹ ê°œë°œì": "web",
    "ëª¨ë°”ì¼ ì•± ê°œë°œì": "mobile",
    "AI ê°œë°œì": "ai",
    "ê²Œì„ ê°œë°œì": "game",
    "ë³´ì•ˆ ì „ë¬¸ê°€": "security",
    "ì„ë² ë””ë“œ / IoT ê°œë°œì": "embedded",
    "ë°ë¸Œì˜µìŠ¤ / í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´": "devops"
  };

  const API_URL = "/api/quiz";
  const nickname = (sessionStorage.getItem("nickname") || "").trim() || "ì‚¬ìš©ì";

  let stage = "common";
  let commonIdx = 0;
  let jobIdx = 0;
  let jobList = [];
  const answersById = {};

  let currentJobKey = null;
  let webBranchInjected = false;

  // ì§êµ° ì•ˆë‚´ í™”ë©´ ì œì–´
  let jobTitleShown = false;
  let onJobIntro = false;
  
  function isAnswered(item) {
    const v = answersById[item.id];
    return item.multiple ? Array.isArray(v) && v.length>0 : typeof v === "string" && v.length>0;
  }

  function currentItem() {
    if (stage === "common") return quizData_common[commonIdx];
    if (stage === "job")    return jobList[jobIdx];
    return null;
  }

  function totalCount() {
    if (stage === "common") return quizData_common.length;
    if (stage === "job")    return jobList.length;
    return 0;
  }

  function indexInStage() {
    if (stage === "common") return commonIdx;
    if (stage === "job")    return jobIdx;
    return 0;
  }

  function renderBranchChoice() {
  const role = answersById["targetRole"] || "ì„ íƒ ì•ˆ í•¨";
  const jobKey = ROLE_TO_JOBKEY[role];
  const hasJobFollowUp = !!(jobKey && quizData_jobs[jobKey]?.length);

  // ë¶„ê¸° í™”ë©´ì—ì„œëŠ” ì•„ë˜ ì´ì „/ë‹¤ìŒ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
  if (btnWrap) btnWrap.style.display = 'none';

  quizBox.innerHTML = `
    <div class="branch-header">
      <div class="branch-icon">ğŸ”</div>
      <div class="branch-texts">
        <div class="branch-title">ë‹¤ìŒ ì§„í–‰ ë°©ì‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
      </div>
    </div>

    <p class="branch-main">
      ì§€ê¸ˆê¹Œì§€ì˜ ê³µí†µ ë‹µë³€ì„ ë°”íƒ•ìœ¼ë¡œ,<br>
      <span class="branch-em">ì–´ë–»ê²Œ ì´ì–´ê°ˆì§€</span> ì„ íƒí•˜ì‹¤ ìˆ˜ ìˆì–´ìš”.
    </p>

    <div class="branch-buttons">
      <button class="quiz-btn branch-btn branch-btn--neutral ${hasJobFollowUp ? "" : "branch-btn--disabled"}"
              id="branch-detail" ${hasJobFollowUp ? "" : "disabled"} data-require-login="true">
        ${hasJobFollowUp ? "ì§êµ°ë³„ ì„¸ë¶€ ì§ˆë¬¸ ê³„ì†í•˜ê¸°" : "ì§êµ°ë³„ ì§ˆë¬¸ ì—†ìŒ (ì§êµ° ë¯¸ì„ íƒ)"}
      </button>

      <button class="quiz-btn branch-btn branch-btn--primary" id="branch-chat" data-require-login="true">
        ëŒ€í™”í˜•ìœ¼ë¡œ ì „í™˜ (ì±„íŒ…ìœ¼ë¡œ ì¶”ì²œ ë°›ê¸°)
      </button>

      <button class="quiz-btn branch-btn branch-btn--ghost" id="branch-end">
        ê³µí†µ ì§ˆë¬¸ë§Œìœ¼ë¡œ ê²°ê³¼ ë³´ê¸°
      </button>
    </div>

    <button class="branch-back" type="button">â† ê³µí†µ ì§ˆë¬¸ ë‹¤ì‹œ ìˆ˜ì •í•˜ê¸°</button>

    <p class="branch-hint">* ê³µí†µ ë‹µë³€ì„ ë‹¤ì‹œ ë³´ê³  ì‹¶ë‹¤ë©´ ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
  `;

  // 1) ì§êµ°ë³„ ì„¸ë¶€ ì§ˆë¬¸
  document.getElementById("branch-detail")?.addEventListener("click", () => {
    if (!hasJobFollowUp) return;
    const role = answersById["targetRole"];
    const jobKey = ROLE_TO_JOBKEY[role];
    stage = "job";
    currentJobKey = jobKey;
    jobList = quizData_jobs[jobKey];
    jobIdx = 0;
    jobTitleShown = false;
    webBranchInjected = false;

    if (btnWrap) btnWrap.style.display = 'flex'; // ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê²Œ
    render();
  });

  // 2) ëŒ€í™”í˜•ìœ¼ë¡œ ì „í™˜
  document.getElementById("branch-chat")?.addEventListener("click", () => {
    try {
      const payload = buildPayload(/*commonOnly=*/true);
      sessionStorage.setItem("quizCommonAnswers", JSON.stringify(payload));
    } catch (e) {
      console.warn("ì„¸ì…˜ ì €ì¥ ì‹¤íŒ¨:", e);
    }
    window.location.href = "chat.html";
  });

  // 3) ê³µí†µ ì§ˆë¬¸ë§Œìœ¼ë¡œ ê²°ê³¼ ë³´ê¸°
  document.getElementById("branch-end")?.addEventListener("click", () => {
    jobList = [];
    jobIdx = 0;
    const payload = buildPayload(true);
    goToResultPage(true, payload);
  });

  // 4) ê³µí†µ ì§ˆë¬¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
  document.querySelector('.branch-back')?.addEventListener('click', () => {
    stage = "common";
    commonIdx = quizData_common.length - 1;  // ë§ˆì§€ë§‰ ê³µí†µ ì§ˆë¬¸ìœ¼ë¡œ
    if (btnWrap) btnWrap.style.display = 'flex'; // ë‹¤ì‹œ í‘œì‹œ
    render();
  });
}

  function render() {
    if (btnWrap && stage !== 'branch') {
      btnWrap.style.display = 'flex';
    }
    // ì§êµ° ì•ˆë‚´ í™”ë©´
    if (stage === "job" && !jobTitleShown) {
      const role = answersById["targetRole"];
      quizBox.innerHTML = `
        <div class="section-title">ğŸ’¡ ${nickname}ë‹˜ì´ ì„ íƒí•˜ì‹  <b>${role || "-"}</b>ì— ëŒ€í•œ ì¶”ê°€ ì§ˆë¬¸</div>
        <div class="section-sub">ì•„ë˜ ë¬¸í•­ì— ë‹µí•´ì£¼ì‹œë©´ ë” ì •ë°€í•œ ìŠ¤íƒì„ ì¶”ì²œí•´ë“œë¦´ê²Œìš”.</div>
      `;
      jobTitleShown = true;
      onJobIntro = true;
      prevBtn.disabled = false;
      nextBtn.textContent = "ì‹œì‘í•˜ê¸°";
      nextBtn.disabled = false;
      return;
    }

    // ê³µí†µ í›„ ë¶„ê¸° ì„ íƒ í™”ë©´
    if (stage === "branch") {
      renderBranchChoice();
      return;
    }

    // ì¼ë°˜ ì§ˆë¬¸ í™”ë©´
    const item = currentItem();
    const idx = indexInStage();
    const total = totalCount();

    onJobIntro = false;
    quizBox.innerHTML = `
      <div class="progress-line"><div class="bar" style="width:${((idx + 1) / total) * 100}%"></div></div>
      <div class="question">${item.q}</div>
      <div class="options" role="group" aria-label="ì„ íƒì§€"></div>
    `;

    const wrap = quizBox.querySelector(".options");
    const prevAns = answersById[item.id];

    (item.a || []).forEach(label => {
      const el = document.createElement("div");
      el.className = "option";
      el.setAttribute("role", "button");
      el.setAttribute("tabindex", "0");
      el.dataset.value = label;
      el.textContent = label;

      // ì„ íƒ ë³µì›
      if (item.multiple && Array.isArray(prevAns) && prevAns.includes(label)) el.classList.add("selected");
      if (!item.multiple && prevAns === label) el.classList.add("selected");

      const toggle = () => {
        if (item.multiple) {
          el.classList.toggle("selected");
          const selected = Array.from(wrap.querySelectorAll(".option.selected")).map(n => n.dataset.value);
          answersById[item.id] = selected;
        } else {
          wrap.querySelectorAll(".option").forEach(n => n.classList.remove("selected"));
          el.classList.add("selected");
          answersById[item.id] = label;
        }
      };
      el.addEventListener("click", toggle);
      el.addEventListener("keydown", (e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); toggle(); } });

      wrap.appendChild(el);
    });

    // ë²„íŠ¼ ìƒíƒœ
    if (stage === "common") {
      prevBtn.disabled = commonIdx === 0;
      nextBtn.textContent = (commonIdx === quizData_common.length - 1) ? "ë‹¤ìŒ ë‹¨ê³„" : "ë‹¤ìŒ";
      nextBtn.disabled = false;
    } else if (stage === "job") {
      prevBtn.disabled = false;

      const curr = currentItem();
      if (currentJobKey ==="web" && curr && curr.id === "web_area") {
        nextBtn.textContent = "ë‹¤ìŒ";
      } else {
          nextBtn.textContent = (jobIdx === jobList.length - 1) ? "ê²°ê³¼ ë³´ê¸°" : "ë‹¤ìŒ";
      }
      nextBtn.disabled = false;
    }
  }

  function buildPayload(commonOnly = false) {
    const allQs = commonOnly ? [...quizData_common] : [...quizData_common, ...jobList];
    return {
      answers: allQs.map((q, i) => ({
        index: i,
        id: q.id ?? null,
        question: q.q,
        multiple: !!q.multiple,
        value: answersById[q.id] ?? null
      }))
    };
  }

  async function submitToServer(commonOnly = false) {
    quizBox.innerHTML = `<div class="loading">AIê°€ ê²°ê³¼ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</div>`;
    nextBtn.disabled = true; 
    prevBtn.disabled = true;

    try {
      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(buildPayload(commonOnly))
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();
      renderResult(data);
    } catch (e) {
      quizBox.innerHTML = `<div class="error">ì„œë²„ ì˜¤ë¥˜: ${e.message}</div>`;
      nextBtn.disabled = false; 
      prevBtn.disabled = false;
    }
  }

  function renderResult(result) {
    const s = result?.recommended_stack || {};
    const pct = Math.round((result?.score || 0) * 100);
    quizBox.innerHTML = `
      <h3>âœ… ì¶”ì²œ ì§êµ°: ${result?.role || "-"} <small>(ì í•©ë„: ${isNaN(pct) ? "-" : pct + "%"})</small></h3>
      <p class="reasons">${(result?.reasons || []).join(" Â· ")}</p>
      <div class="result-grid">
        <div><h4>Frontend</h4><p>${(s.frontend || []).join(", ")}</p></div>
        <div><h4>Backend</h4><p>${(s.backend || []).join(", ")}</p></div>
        <div><h4>DevOps</h4><p>${(s.devops || []).join(", ")}</p></div>
        <div><h4>DB</h4><p>${(s.db || []).join(", ")}</p></div>
        <div><h4>Learning Path</h4><ol>${(s.learning_path || []).map(x => `<li>${x}</li>`).join("")}</ol></div>
      </div>
      <button id="retryBtn" class="quiz-btn">ë‹¤ì‹œ í•˜ê¸°</button>
    `;
    document.getElementById('retryBtn')?.addEventListener('click', () => location.reload());
  }

  function goToResultPage(commonOnly = false, payload) {
    const payloadJson = JSON.stringify(payload);
    sessionStorage.setItem("quizResultPayload", payloadJson);
    sessionStorage.setItem("quizResultCommonOnly", commonOnly ? "1" : "0");
    window.location.href = "result.html";
  }

  nextBtn.addEventListener("click", () => {
    // ì§êµ° ì•ˆë‚´ í™”ë©´ì—ì„œ 'ì‹œì‘í•˜ê¸°'
    if (stage === "job" && onJobIntro) {
      onJobIntro = false;
      render();
      return;
    }

    // ê³µí†µ / ì§êµ° ì§ˆë¬¸ì—ì„œ ìœ íš¨ì„± ê²€ì‚¬
    const item = currentItem();
    if (item && !item.multiple &&!isAnswered(item)) { 
      alert("í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”."); 
      return; 
    }

    // ê³µí†µ ì§ˆë¬¸ ë‹¨ê³„
    if (stage === "common") {
      if (commonIdx < quizData_common.length - 1) {
        commonIdx += 1;
        render();
      } else {
        // ê³µí†µ ì§ˆë¬¸ ë â†’ ë¶„ê¸° ì„ íƒ í™”ë©´ìœ¼ë¡œ ì´ë™
        stage = "branch";
        render();
      }
      return;
    }

    // ì§êµ°ë³„ ì§ˆë¬¸ ë‹¨ê³„
    if (stage === "job") {
      if (currentJobKey === "web" && item.id === "web_area") {
        const selected = answersById["web_area"];

        let branchKey = null;
        if (selected?.includes("í”„ë¡ íŠ¸ì—”ë“œ")) {
          branchKey = "frontend";
        } else if (selected?.includes("ë°±ì—”ë“œ")) {
          branchKey = "backend";
        } else if (selected?.includes("í’€ìŠ¤íƒ")) {
          branchKey = "fullstack";
        }

        if(branchKey) {
          jobList = [quizData_jobs.web[0], ...webSubQuestions[branchKey]];
          webBranchInjected = true;
        } else {
          jobList = [quizData_jobs.web[0]];
        }

        if (jobIdx < jobList.length - 1) {
          jobIdx += 1;
          render();
        } else {
          submitToServer(false);
        }
        return;
      }

      if (jobIdx < jobList.length - 1) {
        jobIdx += 1;
        render();
      } else {
        const payload = buildPayload(false);
        goToResultPage(false, payload);
      }
    }
  });

  prevBtn.addEventListener("click", () => {
    // ë¶„ê¸° í™”ë©´ì—ì„œ 'ì´ì „' â†’ ê³µí†µ ë§ˆì§€ë§‰ ì§ˆë¬¸ìœ¼ë¡œ ë³µê·€
    if (stage === "branch") {
      stage = "common";
      commonIdx = quizData_common.length - 1;
      render();
      return;
    }

    // ì§êµ° ì•ˆë‚´ í™”ë©´ì—ì„œ 'ì´ì „' â†’ ê³µí†µ ë§ˆì§€ë§‰
    if (stage === "job" && onJobIntro) {
      stage = "common";
      commonIdx = quizData_common.length - 1;
      onJobIntro = false;
      render();
      return;
    }

    if (stage === "job") {
      if (jobIdx > 0) {
        jobIdx -= 1;
        render();
      } else {
        stage = "common";
        commonIdx = quizData_common.length - 1;
        render();
      }
      return;
    }

    // ê³µí†µ ë‹¨ê³„
    if (stage === "common" && commonIdx > 0) {
      commonIdx -= 1;
      render();
    }
  });

  // ì´ˆê¸° ë Œë”
  prevBtn.disabled = true;
  render();
});

document.addEventListener("keydown", function (e) {
  if (e.key !== "Enter") return;

  const nextBtn = document.getElementById("nextBtn");
  if (!nextBtn) return;

  const tag = e.target.tagName.toLowerCase();
  const type = (e.target.type || "").toLowerCase();

  if (
    tag === "textarea" ||
    tag === "select" ||
    (tag === "input" && type !== "button" && type !== "submit")
  ) {
    return;
  }

  if (
    tag === "button" &&
    e.target.id !== "nextBtn" && 
    e.target.id !== "prevBtn"
  ) {

    setTimeout(() => {
      nextBtn.click();
    }, 0);
    return;
  }

  e.preventDefault();
  nextBtn.click();
});
